language: java
jdk:
      - oraclejdk8

sudo: false
install: true

script:
  - ./mvnw package


after_success:
  - mkdir -p codedeploy
  - zip -r jobportal.zip target/team4-0.0.1-SNAPSHOT.war appspec.yml restartapp.sh
  - mv jobportal.zip codedeploy/
  - cd codedeploy


before_deploy:
  - cd ..

deploy:
  - provider: s3
    access_key_id: AKIAIU3BPZCVBLDO3RKA
    secret_access_key: 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
      secure: D8cEbP62uS6OPH0mwziOHbUbPI3Bp9Sk2mgptoBLNwCLlpQqq6pudeaBjMgaPRpv3P0YuzLIEnt8xNSdql+mnSeBeEsHneQBHh3VsX1MQU6WRacon5h/ddNTPx3dRZyMmD8IPLDLGkTEOCQhcacQwXcTPBT0QZBly9eb5uT+NbHsfrkOTc/u70Id0ZZeFF4RkIhiuKq464QiP2Z5IVTGUKplwhpty/3QRriZo7FYqn5BVFkl6Kw/ts5Ckmztx6ypdbXDgz2igLcgdZ6jyjyBd1vAZqIJd5CWGicL49QustcP0Ny11gAJqJpH05Df4L3iwpsYHgO/e/6IpxsRlWAa/IEITsvBcjeDNcUbu4VWR8TZRALGEdKSm3KYiTBwqrkbLsOy9/IiCAUQcNyrXnt4HO5vzjFI530WSK1iFSUqZOmF/923GaKpGTXznReB7KakcHt6mWJtP1uTRiIXE3OnW+o0reecFyl3TQh9zoUuqWZbW5GXZcBQelLYhd7VQIx/BbPcxlJf5pmK6+0NqAfRQBW3aHg3tJ++qNBM0tCKcABW9fpPH+VFYISetRufySmdJu3TMDxQQGvlzIKnxStQR1sP0Y0IZLUCsInfKy1rwGmAraUMKz6KzjT/tkTaO/tSkvM8CAoeszwK55mW/X2P2aVzmhfcJYPMnKUKktbXyyg=
    local_dir: codedeploy
    bucket: code-deploy.neu-csye6225-spring2017-team-4.me
    region: us-east-1
    skip_cleanup: true
  - provider: codedeploy
    access_key_id: AKIAIU3BPZCVBLDO3RKA
    bucket: code-deploy.neu-csye6225-spring2017-team-4.me
    key: jobportal.zip
    bundle_type: zip
    application: jobportal
    deployment_group: jobportal
    region: us-east-1
    secret_access_key: xgOpFKYDmBDDuTJfc0/c92LjRmngUsi1JxY2n4bO
      secure: D8cEbP62uS6OPH0mwziOHbUbPI3Bp9Sk2mgptoBLNwCLlpQqq6pudeaBjMgaPRpv3P0YuzLIEnt8xNSdql+mnSeBeEsHneQBHh3VsX1MQU6WRacon5h/ddNTPx3dRZyMmD8IPLDLGkTEOCQhcacQwXcTPBT0QZBly9eb5uT+NbHsfrkOTc/u70Id0ZZeFF4RkIhiuKq464QiP2Z5IVTGUKplwhpty/3QRriZo7FYqn5BVFkl6Kw/ts5Ckmztx6ypdbXDgz2igLcgdZ6jyjyBd1vAZqIJd5CWGicL49QustcP0Ny11gAJqJpH05Df4L3iwpsYHgO/e/6IpxsRlWAa/IEITsvBcjeDNcUbu4VWR8TZRALGEdKSm3KYiTBwqrkbLsOy9/IiCAUQcNyrXnt4HO5vzjFI530WSK1iFSUqZOmF/923GaKpGTXznReB7KakcHt6mWJtP1uTRiIXE3OnW+o0reecFyl3TQh9zoUuqWZbW5GXZcBQelLYhd7VQIx/BbPcxlJf5pmK6+0NqAfRQBW3aHg3tJ++qNBM0tCKcABW9fpPH+VFYISetRufySmdJu3TMDxQQGvlzIKnxStQR1sP0Y0IZLUCsInfKy1rwGmAraUMKz6KzjT/tkTaO/tSkvM8CAoeszwK55mW/X2P2aVzmhfcJYPMnKUKktbXyyg=
    wait-until-deployed: true
    
